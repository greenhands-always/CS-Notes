#MYSQL #数据库 
只会包含一些要点和特殊点，不包含知识体系

---
从技术层面,SQL并不是一门单一语言,而是一些东西的集合,包括:
- Data Manipulation Language (DML) :主要是select,insert,delete这些操作
	1. 过程化DML
	2. 声明式DML
- Data Definition Language (DDL):定义schema来创建表存储数据
%%数据库系统所使用的==存储结构和访问方式==是通过一系列特殊的DDL语句来说明的，这种特殊的DDL称作数据存储和定义(datastorage and definition)语言C这些语句定义了数据库模式的实现细节，而这些细节对用户来说通常是不可见的。
约束类别:
- 域约束
- 参照完整性 
- 断言
- 授权
%%
- Data Control Language(DCL):安全授权,负责权限控制
- 其他: 诸如视图、完整性、事务等特性

SQL实际上是基于bag algebra的，可以有重复的元素

---
# 文件系统主要弊端
## 数据的冗余和不一致(dataredundancy and inconsistency)。
%%由于文件和程序是在很长的一段时间内由不同的程序员创建的，不同文件可能有不同的结构，不同程序可能采用不同的程序设计语言写成。此外，相同的信息可能在几个地方（文件）重复存储。例如，如果某学生有两个专业（例如，音乐和数学），该学生的地址和电话号码就可能既出现在包含音乐系学生记录的文件中，又出现在包含数学系学生记录的文件中。这种冗余除了导致存储和访问开销增大外，还可
能导致数据不一致性(datainconsistency)，即同一数据的不同副本不一致。例如，学生地址的更
改可能在音乐系记录中得到反映而在系统的其他地方却没有。%%
## ·数锯访问固难(difficulty in accessing data)。
## ·数据孤立(dataisolation)。
## ·完整性问题(integrityproblem)。
%%数据库中所存储数据的值必须满足某些特定的一致性约束
(consistency constraint)。假设大学为每个系维护一个账户，并且记录各个账户的余额。我们还
假设大学要求每个系的账户余额永远不能低于零。开发者通过在各种不同应用程序中加入适当
的代码来强制系统中的这些约束。然而，当新的约束加人时，很难通过修改程序来体现这些新
的约束。尤其是当约束涉及不同文件中的多个数据项时，问题就变得更加复杂了。%%
## ·原子性问题(atomicity problem)。
%%如同任何别的设备一样，计算机系统也会发生故障。一旦故障
发生，数据就应被恢复到故障发生以前的一致的状态，对很多应用来说，这样的保证是至关重仁互］
要的。让我们看看把A系的账户余额中的500美元转入B系的账户余额中的这样一个程序。假
设在程序的执行过程中发生了系统故障，很可能A系的余额中减去的500美元还没来得及存入
B系的余额中，这就造成了数据库状态的不一致。显然，为了保证数据库的一致性，这里的借
和贷两个操作必须是要么都发生，要么都不发生。也就是说，转账这个操作必须是原子的一一
它要么全部发生要么根本不发生。在传统的文件处理系统中，保持原子性是很难做到的。%%
## ·井发访问异常(concurrent-accessanomaly)。
%%为了提高系统的总体性能以及加快响应速度，许多
系统允许多个用户同时更新数据。实际上，如今最大的互联网零售商每天就可能有来自购买者
对其数据的数百万次访问。在这样的环境中，并发的更新操作可能相互影响，有可能导致数据
的不一致。设A系的账户余额中有10000美元，假如系里的两个职员几乎同时从系的账户中取
款（例如分别取出500美元和100美元），这样的并发执行就可能使账户处千一种错误的（或不
一致的）状态。假设每个取款操作对应执行的程序是读取原始账户余额，在其上减去取款的金
额，然后将结果写回。如果两次取款的程序并发执行，可能它们读到的余额都是IO000美元，
并将分别写回9500美元和9900美元。A系的账户余额中到底剩下9500美元还是9900美元视
哪个程序后写回结果而定，而实际上正确的值应该是9400美元。为了消除这种情况发生的可
能性，系统必须进行某种形式的管理。但是，由千数据可能被多个不同的应用程序访问，这些
程序相互间事先又没有协调，管理就很难进行。
作为另一个例子，假设为确保注册一门课程的学生人数不超过上限，注册程序维护一个注
册了某门课程的学生计数。当一个学生注册时，该程序读人这门课程的当前计数值，核实该计
数还没有达到上限，给计数值加I,将计数存回数据库。假设两个学生同时注册，而此时的计
数值是（例如）39。尽管两个学生都成功地注册了这门课程，计数值应该是41,然而两个程序
执行可能都读到值39,然后都写回值40,导致不正确地只增加了1个注册人数。此外，假设该
课程注册人数的上限是40;在上面的例子中，两个学生都成功注册，就导致违反了40个学生
为注册上限的规定。%%
## ·安全性问题(securityproblem)。
%%并非数据库系统的所有用户都可以访问所有数据。例如在大学中，
工资发放人员只需要看到数据库中关千财务信息的那个部分。他们不需要访问关千学术记录的信息。
仁汇］但是，由于应用程序总是即席地加入到文件处理系统中来，这样的安全性约束难以实现。
以上问题以及一些其他问题，促进了数据库系统的发展。接下来我们将看一看数据库系统为了解
决上述在文件处理系统中存在的问题而提出的概念和算法。在本书的大部分篇幅中，我们在讨论典型
的数据处理应用时总以大学作为实例。%%

---
# 数据模型
- 关系模型
- 实体-联系模型(ER)
- 基于对象的数据模型
- 半结构化数据模型

# Aggregation
常见函数：
- AVG(co1)
- MIN(co1)
- MAX(co1)
- SUM(co1)
- COUNT(co1)
聚合只能用在select的输出字句中。
下面给出聚合函数的例子，不同col性能不同，对于调优很有必要了解这些![](https://obsidian-notes-of-huangyh.oss-cn-hangzhou.aliyuncs.com/img/20230126225510.png)

